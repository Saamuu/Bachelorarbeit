/*--------------------------------*- C++ -*----------------------------------*\
|       o          |                                                          |
|    o     o       | OpenFOAM (Engys Edition):                                |
|   o   O   o      | Version: 2.2_engysEdition-2.5                            |
|    o     o       | Web:     http://www.engys.com                            |
|       o          |                                                          |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    location    "system";
    object      snappyHexMeshDict;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

castellatedMesh true;

snap            true;

addLayers       true;

autoBlockMesh   true;

blockData       ( 0.05 0 );

geometry
{
  
    wallOutlet.stl
    {
        type            triSurfaceMesh;
        name            wallOutlet;
    }
    distributor2.stl
    {
        type            triSurfaceMesh;
        name            wallDistributor;
    }
    wallTank.stl
    {
        type            triSurfaceMesh;
        name            wallTank;
    }
    inlet.stl
    {
        type            triSurfaceMesh;
        name            inlet;
    }
    outlet.stl
    {
        type            triSurfaceMesh;
        name            outlet;
    }
    wallInlet.stl
    {
        type            triSurfaceMesh;
        name            wallInlet;
    }
}

castellatedMeshControls
{
    features        ( );
    refinementSurfaces
    {
        wallDistributor
        {
           level           ( 5 5 );
            patchInfo
            {
                type wall;
            }  
        }
        wallOutlet
        {
            level           ( 3 3 );
            patchInfo
            {
                type wall;
            }
        }
        wallTank
        {
          level           ( 2 2 );
            patchInfo
            {
                type wall;
            }  
        }
        inlet
        {
          level           ( 3 3 );
            patchInfo
            {
                type patch;
            }  
            
        }
        outlet
        {
            level           ( 3 3 );
            patchInfo
            {
                type patch;
            } 
        }
        wallInlet
        {
           level           ( 3 3 );
            patchInfo
            {
                type wall;
            }  
        }
    }
    refinementRegions
    {
    }
    locationInMesh  ( 0 0 1 );
    maxLocalCells   100000000;
    maxGlobalCells  100000000;
    minRefinementCells 100;
    maxLoadUnbalance 0.1;
    nCellsBetweenLevels 2;
    resolveFeatureAngle -60;
    featureRefineAngle 20;
    refineSurfaceBoundary false;
    minBaffleAngle  -60;
    allowFreeStandingZoneFaces false;
    balanceThenRefine true;
    nGapRefinements 0;
    minZoneRegionSize 0;
    wrapper
    {
        wrap            false;
        outlets         ( inlet outlet ffmaxy ffminy ffmaxz ffminz );
        cutoff          1000;
        sigma           3;
        volSources      true;
        volDistance     1;
        meshInMM        false;
        maxIter         200;
        writeFields     false;
        invert          false;
    }
}

snapControls
{
    featureEdges
    {
    }
    nOuterIter      1;
    nPreFeatureIter 0;
    nSolveIter      10;
    nFeatureIter    60;
    globalFeatureEdges true;
    globalRegionSnap false;
    nSmoothPatch    2;
    tolerance       4;
    nRelaxIter      5;
    zoneFeatureSnapping true;
    directFeatureSnapping true;
    regionFeatureLines false;
    geometryFeatureLines true;
    snapSurfBoundary true;
    collapseTol     0.25;
    enlargeStencil  true;
    featureSnapChecks true;
    smoothSnappedSurface true;
    concaveTol      0.3;
}

addLayersControls
{
    layers
    {
       
        "wall.*"
        {
           nSurfaceLayers  3;  
        }
       
    }
    relativeSizes   false;
    finalLayerThickness 0.4;
    expansionRatio  1.3;
    minThickness    0.2;
    featureAngleMerge 45;
    featureAngleTerminate 80;
    nRelaxIter      5;
    maxFaceThicknessRatio 2;
    maxThicknessToMedialRatio 0.3;
    minMedialAxisAngle 90;
    maxLayerIter    30;
    growConvexEdge  true;
    growConcaveEdge true;
    growUpPatches   true;
    preBalance      false;
    layerRecovery   1;
}

meshQualityControls
{
    maxNonOrtho     70;
    maxBoundarySkewness 20;
    maxInternalSkewness 6;
    maxConcave      80;
    minFlatness     0.5;
    minVol          1e-14;
    minTetQuality   -1e+30;
    minArea         1e-13;
    minTwist        0.05;
    minDeterminant  0.0001;
    minFaceWeight   0.08;
    minVolRatio     0.02;
    minTriangleTwist -0.99;
    nSmoothScale    10;
    errorReduction  0.75;
    minVolCollapseRatio -1;
    faceFaceCells   true;
    minSnapRelativeVolume -1;
    minSnapRelativeTetVolume -1;
    maxGaussGreenCentroid -1;
    maxFaceCentreNonOrtho 180;
    smoothAlignedEdges false;
}

debug           0;

mergeTolerance  1e-06;


// ************************************************************************* //
